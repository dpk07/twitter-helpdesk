(this["webpackJsonptwitter-helpdesk"]=this["webpackJsonptwitter-helpdesk"]||[]).push([[0],{113:function(e,t){},116:function(e,t,a){},117:function(e,t,a){"use strict";a.r(t);for(var n=a(0),s=a.n(n),r=a(55),l=a.n(r),o=(a(67),a(3)),c=a(4),i=a(6),m=a(5),u=a(7),p=a(1),d=(n.Component,function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{style:{height:"75vh"},className:"container valign-wrapper"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col s12 center-align"},s.a.createElement("h4",null,s.a.createElement("b",null,"Twitter")," Helpdesk"," "),s.a.createElement("p",{className:"flow-text grey-text text-darken-1"},"Use this helpdesk to get a unified views of your tweets and reply to them."),s.a.createElement("br",null),s.a.createElement("div",{className:"col s6"},s.a.createElement(u.b,{to:"/register",style:{width:"140px",borderRadius:"3px",letterSpacing:"1.5px"},className:"btn btn-large waves-effect waves-light hoverable blue accent-3"},"Register")),s.a.createElement("div",{className:"col s6"},s.a.createElement(u.b,{to:"/login",style:{width:"140px",borderRadius:"3px",letterSpacing:"1.5px"},className:"btn btn-large btn-flat waves-effect white black-text"},"Log In")))))}}]),a}(n.Component)),h=a(17),g=a(12),v=a.n(g),f=function(e){e?v.a.defaults.headers.common.Authorization=e:delete v.a.defaults.headers.common.Authorization},w=a(57),E=a(13),b=a.n(E),_=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).onChange=function(t){e.setState(Object(h.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a,n,s={name:e.state.name,email:e.state.email,password:e.state.password,password2:e.state.password2};a=s,n=e.props.history,v.a.post("/users/register",a).then((function(e){return n.push("/login")})).catch((function(e){return console.log(e)}))},e.state={name:"",email:"",password:"",password2:"",errors:{}},e}return Object(c.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col s8 offset-s2"},s.a.createElement(u.b,{to:"/",className:"btn-flat waves-effect"},s.a.createElement("i",{className:"material-icons left"},"keyboard_backspace")," Back to home"),s.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},s.a.createElement("h4",null,s.a.createElement("b",null,"Register")," below"),s.a.createElement("p",{className:"grey-text text-darken-1"},"Already have an account? ",s.a.createElement(u.b,{to:"/login"},"Log in"))),s.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},s.a.createElement("div",{className:"input-field col s12"},s.a.createElement("input",{onChange:this.onChange,value:this.state.name,error:e.name,id:"name",type:"text",className:b()("",{invalid:e.name})}),s.a.createElement("label",{htmlFor:"name"},"Name"),s.a.createElement("span",{className:"red-text"},e.name)),s.a.createElement("div",{className:"input-field col s12"},s.a.createElement("input",{onChange:this.onChange,value:this.state.email,error:e.email,id:"email",type:"email",className:b()("",{invalid:e.email})}),s.a.createElement("label",{htmlFor:"email"},"Email"),s.a.createElement("span",{className:"red-text"},e.email)),s.a.createElement("div",{className:"input-field col s12"},s.a.createElement("input",{onChange:this.onChange,value:this.state.password,error:e.password,id:"password",type:"password",className:b()("",{invalid:e.password})}),s.a.createElement("label",{htmlFor:"password"},"Password"),s.a.createElement("span",{className:"red-text"},e.password)),s.a.createElement("div",{className:"input-field col s12"},s.a.createElement("input",{onChange:this.onChange,value:this.state.password2,error:e.password2,id:"password2",type:"password",className:b()("",{invalid:e.password2})}),s.a.createElement("label",{htmlFor:"password2"},"Confirm Password"),s.a.createElement("span",{className:"red-text"},e.password2)),s.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},s.a.createElement("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"btn btn-large waves-effect waves-light hoverable blue accent-3"},"Sign up"))))))}}]),a}(n.Component),N=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).onChange=function(t){e.setState(Object(h.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault(),function(e){v.a.post("/users/login",e).then((function(e){var t=e.data.token;localStorage.setItem("jwtToken",t),f(t);Object(w.a)(t);window.location.href="/list"})).catch((function(e){return console.log(e)}))}({email:e.state.email,password:e.state.password})},e.state={email:"",password:"",errors:{}},e}return Object(c.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/dashboard"),e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return s.a.createElement("div",{className:"container"},s.a.createElement("div",{style:{marginTop:"4rem"},className:"row"},s.a.createElement("div",{className:"col s8 offset-s2"},s.a.createElement(u.b,{to:"/",className:"btn-flat waves-effect"},s.a.createElement("i",{className:"material-icons left"},"keyboard_backspace")," Back to home"),s.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},s.a.createElement("h4",null,s.a.createElement("b",null,"Login")," below"),s.a.createElement("p",{className:"grey-text text-darken-1"},"Don't have an account? ",s.a.createElement(u.b,{to:"/register"},"Register"))),s.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},s.a.createElement("div",{className:"input-field col s12"},s.a.createElement("input",{onChange:this.onChange,value:this.state.email,error:e.email,id:"email",type:"email",className:b()("",{invalid:e.email||e.emailnotfound})}),s.a.createElement("label",{htmlFor:"email"},"Email"),s.a.createElement("span",{className:"red-text"},e.email,e.emailnotfound)),s.a.createElement("div",{className:"input-field col s12"},s.a.createElement("input",{onChange:this.onChange,value:this.state.password,error:e.password,id:"password",type:"password",className:b()("",{invalid:e.password||e.passwordincorrect})}),s.a.createElement("label",{htmlFor:"password"},"Password"),s.a.createElement("span",{className:"red-text"},e.password,e.passwordincorrect)),s.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},s.a.createElement("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"btn btn-large waves-effect waves-light hoverable blue accent-3"},"Login"))))))}}]),a}(n.Component),y=a(58),k=a.n(y),x=a(59),S=a.n(x),j=a(60),C=[],O=0;O<10;O++)C.push({text:"Hi Hello,May I ask for a favor?",id:O,user:{profile_image_url_https:"https://pbs.twimg.com/profile_images/1315196104091357197/qw8li8wC_normal.jpg",name:"Deepak"+O,followers_count:0,friends_count:0,statuses_count:49},timestamp_ms:"1602420674815",replies:[{text:"Hi, Please tell me.",id:O,timestamp_ms:"1602420674815",user:{profile_image_url_https:"https://pbs.twimg.com/profile_images/1315196104091357197/qw8li8wC_normal.jpg",name:"Amazon"+O,followers_count:0,friends_count:0,statuses_count:49}}]});var T=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleTweetClick=function(e){n.setState({selectedTweet:e})},n.handleChange=function(e){n.setState(Object(h.a)({},e.target.name,e.target.value))},n.handleEnterKey=function(e){if(13==e.keyCode)try{e.preventDefault?e.preventDefault():e.returnValue=!1;var t=n.state,a=t.reply,s=t.selectedTweet,r={status:a+" @"+s.user.screen_name,in_reply_to_status_id:""+s.id_str};!function(e){var t={oauth_token:localStorage.getItem("oauth_token"),oauth_token_secret:localStorage.getItem("oauth_token_secret"),screen_name:localStorage.getItem("screen_name"),tweet:e};v.a.post("/auth/twitter/reply",t).then((function(e){console.log(e)}))}(r),console.log(r)}catch(l){console.log(l.message)}},n.handleLogout=function(){localStorage.removeItem("jwtToken"),localStorage.removeItem("oauth_token"),localStorage.removeItem("oauth_token_secret"),localStorage.removeItem("screen_name"),f(!1),window.location.href="/"},n.state={selectedTweet:null,reply:""},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this.state.reply;return s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row marginBottom0"},s.a.createElement("h5",{className:"left conversationHeading"},"Conversations"),s.a.createElement("h6",{className:"right conversationHeading",style:{cursor:"pointer"},onClick:this.handleLogout},"Logout")),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col s3 parentWrapper"},F(this.props.tweets,this.handleTweetClick)),s.a.createElement("div",{className:"col s9 conversationWrapper"},s.a.createElement("div",{class:"row marginBottom0",style:{height:"87vh"}},s.a.createElement("div",{className:"col s8 leftContainer"},s.a.createElement("div",{className:"row marginBottom0",style:{height:"85%"}},this.state.selectedTweet&&I(this.state.selectedTweet.user),B(this.state.selectedTweet)),s.a.createElement("div",{class:"input-field col s6",style:{width:"100%"}},s.a.createElement("input",{value:e,id:"reply",name:"reply",placeholder:"Reply",type:"text",class:"validate",onChange:this.handleChange,onKeyUp:this.handleEnterKey}))),s.a.createElement("div",{className:"col s4"},this.state.selectedTweet&&L(this.state.selectedTweet.user))))))}}]),a}(n.Component),I=function(e){return s.a.createElement("div",{className:"valign-wrapper marginBottom0 parentTweet"},s.a.createElement("div",{className:"col s1 valign-wrapper"},s.a.createElement("img",{className:"image",src:e.profile_image_url_https})),s.a.createElement("div",{className:"col s11"},s.a.createElement("span",{className:"left"},e.name)))},B=function(e){if(e){var t=[];t.push(e);if(function e(a){a.replies&&(t.push.apply(t,Object(j.a)(a.replies)),a.replies.map((function(t){return e(t)})))}(e),t)return t.sort((function(e,t){return new Date(e.created_at)-new Date(t.created_at)})),console.log(t),s.a.createElement("ul",{style:{padding:"0.5rem"}},t.map((function(e){var t=new Date(e.created_at),a=new Date(t.toLocaleString()),n=a.getHours(),r=a.getMinutes();return s.a.createElement("div",null,s.a.createElement("li",{key:e.id,className:"parentTweet"},s.a.createElement("div",{className:"row valign-wrapper marginBottom0"},s.a.createElement("div",{className:"col s1 valign-wrapper"},s.a.createElement("img",{className:"image",src:e.user.profile_image_url_https})),s.a.createElement("div",{className:"col s9"},s.a.createElement("span",{className:"left left-align"},e.text)),s.a.createElement("div",{className:"col s2"},s.a.createElement("span",{className:"left textGrey left-align"},"".concat(n,":").concat(r))))))})))}},F=function(e,t){if(e)return s.a.createElement("ul",null,e.map((function(e){return s.a.createElement("div",null,s.a.createElement("li",{onClick:function(){return t(e)},key:e.id,className:"parentTweet"},s.a.createElement("div",{className:"row valign-wrapper marginBottom0"},s.a.createElement("div",{className:"col s2 valign-wrapper"},s.a.createElement("img",{className:"image",src:e.user.profile_image_url_https})),s.a.createElement("div",{className:"col s10"},s.a.createElement("span",{className:"left"},e.user.name))),s.a.createElement("div",{className:"row marginBottom0"},s.a.createElement("div",{className:"col s10 push-s2"},s.a.createElement("span",{className:"left textGrey left-align"},e.text)))))})))},L=function(e){return s.a.createElement("div",{className:"container",style:{marginTop:"1rem"}},s.a.createElement("div",{className:"row marginBottom0"},s.a.createElement("img",{className:"profileImage",src:e.profile_image_url_https})),s.a.createElement("div",{className:"row marginBottom0"},e.name),s.a.createElement("div",{className:"row marginBottom0"},s.a.createElement("table",{className:"responsive-table"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,"Followers"),s.a.createElement("td",null,e.followers_count)),s.a.createElement("tr",null,s.a.createElement("td",null,"Friends"),s.a.createElement("td",null,e.friends_count)),s.a.createElement("tr",null,s.a.createElement("td",null,"Statuses"),s.a.createElement("td",null,e.statuses_count))))))},M=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).onSuccess=function(t){console.log(t),t.json().then((function(t){console.log(t),e.setState({isAuthenticated:!0}),localStorage.setItem("oauth_token",t.oauth_token),localStorage.setItem("oauth_token_secret",t.oauth_token_secret),localStorage.setItem("screen_name",t.screen_name),function(){var e={oauth_token:localStorage.getItem("oauth_token"),oauth_token_secret:localStorage.getItem("oauth_token_secret")};return v.a.post("/auth/twitter/getRecentMentions",e).then((function(e){return e.data}))}().then((function(t){t.map((function(t){return e.tweetsMap.set(t.id,t)})),t.map(e.handleTweet)})),null==e.socket&&(e.socket=S()("/",{query:{screenName:t.screen_name},transports:["websocket"],upgrade:!1}),e.socket.on("tweet",e.handleTweetFromStream))}))},e.handleTweetFromStream=function(t){console.log(t),e.tweetsMap.set(t.id,t);var a=e.state.tweets;if(t.in_reply_to_status_id){var n=e.tweetsMap.get(t.in_reply_to_status_id);n&&(n.replies?n.replies.push(t):n.replies=[t])}else a.unshift(t);e.setState({tweets:a},(function(){return console.log("state",e.state)}))},e.handleTweet=function(t){console.log(t),e.tweetsMap.set(t.id,t);var a=e.state.tweets;if(t.in_reply_to_status_id){var n=e.tweetsMap.get(t.in_reply_to_status_id);n&&(n.replies?n.replies.push(t):n.replies=[t])}else a.push(t);e.setState({tweets:a},(function(){return console.log("state",e.state)}))},e.onFailed=function(e){alert(e)},e.socket=null,e.state={isAuthenticated:!1,user:null,token:"",tweets:[]},e.tweetsMap=new Map,e}return Object(c.a)(a,[{key:"componentWillUnmount",value:function(){this.socket.disconnect(),this.socket=null}},{key:"render",value:function(){var e=this.state.isAuthenticated?s.a.createElement("div",null,s.a.createElement(T,{tweets:this.state.tweets})):s.a.createElement("div",null,s.a.createElement(k.a,{loginUrl:"/auth/twitter",onFailure:this.onFailed,onSuccess:this.onSuccess,requestTokenUrl:"/auth/twitter/reverse",style:{marginTop:"3rem"}}));return s.a.createElement("div",{className:"App"},e)}}]),a}(n.Component),R=a(61),A=function(e){var t=e.component,a=Object(R.a)(e,["component"]),n=localStorage.getItem("jwtToken");return s.a.createElement(p.b,Object.assign({},a,{render:function(e){return n?s.a.createElement(t,e):s.a.createElement(p.a,{to:"/login"})}}))},D=(a(116),function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement(u.a,null,s.a.createElement("div",{className:"App"},s.a.createElement(p.b,{exact:!0,path:"/",component:d}),s.a.createElement(p.b,{exact:!0,path:"/register",component:_}),s.a.createElement(p.b,{exact:!0,path:"/login",component:N}),s.a.createElement(A,{exact:!0,path:"/list",component:M})))}}]),a}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},62:function(e,t,a){e.exports=a(117)},67:function(e,t,a){}},[[62,1,2]]]);
//# sourceMappingURL=main.bc11b42e.chunk.js.map